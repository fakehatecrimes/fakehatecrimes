.card
  %h3 New Report - Fill in as much detail as you can
  
  %form{action: "/reports/create", method: "post"}
    = hidden_field_tag('user_id', (current_user ? current_user.id : nil))
    = hidden_field_tag('authenticity_token', form_authenticity_token)
    
    .row
      .col-md-6
        %h4 Report Details
        
        .form-group
          %label
            %strong What type of fake hate crime?
          - MediaType.all.reverse.each do |s|
            .radio-item
              - if @fake.get( :media_type_id )
                - if @fake.get( :media_type_id ) == s.id
                  = radio_button_tag 'media_type_id', s.id, checked: true
                  = s.name
                - else
                  = radio_button_tag 'media_type_id', s.id
                  = s.name
              - else
                - if s.name == SUSPECTED
                  = radio_button_tag 'media_type_id', s.id, checked: true
                  = s.name
                - else
                  = radio_button_tag 'media_type_id', s.id
                  = s.name
        
        .form-group
          %label
            %strong Approximate date of hoax
            %small.text-muted (required)
          %input{type: "date", name: "date", class: 'form-control'}
        
        .form-group
          %label
            %strong City
          = text_field_tag :city, @fake.city, class: 'form-control'
        
        .form-group
          %label
            %strong State
          = text_field_tag :state, @fake.state, class: 'form-control'
        
        .form-group
          %label
            %strong Reason - why you think it's a hoax
          = text_area_tag :reason, @fake.reason, size: "17x9", class: 'form-control'
      
      .col-md-6
        %h4 Choose Articles or Programs
        .media-selection
          - Medium.list( nil ).each do |medium|
            .media-item
              = check_box_tag "media_id_#{ medium.id }", medium.id
              = medium.get :title
        
        %h4 Add New Article or Program
        %table.medium
          %tr
            %th
            %th
          %tr
            %td{align: "left", valign: "top"}
              %b Choose from the following
              %br
              - Article.all.each do |s|
                - str = s.get "name"
                - if str =~ /online/i
                  =radio_button_tag "article_id", s.get( :id ), true
                  =label_tag str
                - else
                  =radio_button_tag "article_id", s.get( :id ), false
                  =label_tag str
                %br
              %br
              %b Title or name of article or program
              %br
              = text_field_tag "medium[title]", @medium.get(:title), max_length: TEXT_FIELD_SIZE
              %br
              %br
              Name of publication or program
              %br
              = text_field_tag "medium[name]", @medium.get(:name), max_length: TEXT_FIELD_SIZE
              %br
              %br
              Authors
              %br
              = text_field_tag "medium[authors]", @medium.get(:authors), max_length: TEXT_FIELD_SIZE
              %br
              %br
              URL of online article (copy and paste line
              %br
              beginning with 'http' from browser)
              %br
              = text_field_tag "medium[url]", @medium.get(:url), max_length: URL_SIZE
            %td{align: "left", valign: "top"}
              Summary of content
              %br
              = text_area_tag "medium[body]", @medium.get(:body), cols: 25, rows: 20
          %tr
            %td{align: "left", valign: "top"}
              %br
              The day you read the article, or saw or heard
              %br
              the program
              %small.text-muted (required)
              %br
              %input{type: "date", name: "retrieval_date", value: (@medium.retrieval_date.present? ? (@medium.retrieval_date.is_a?(String) ? @medium.retrieval_date : @medium.retrieval_date.strftime('%Y-%m-%d')) : ''), class: 'form-control'}
            %td{align: "left", valign: "top"}
              %br
              The day the article was first published
              %br
              or broadcast
              %small.text-muted (required)
              %br
              %input{type: "date", name: "publication_date", value: (@medium.publication_date.present? ? (@medium.publication_date.is_a?(String) ? @medium.publication_date : @medium.publication_date.strftime('%Y-%m-%d')) : ''), class: 'form-control'}
    
    .text-center.mt-20
      %input{type: "submit", name: "commit", value: HIT_THIS_BUTTON, class: "btn btn-success btn-lg"}
